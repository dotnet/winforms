parameters:
  # All parameters are required for our purposes (except HelixType); see send-to-helix.yml for details
  RepoName: ''
  HelixType: 'tests/default'            
  HelixTargetQueues: ''    
  HelixAccessToken: ''          
  XUnitProjects: ''
  DisplayNamePrefix: ''        

steps:
- template: /eng/common/templates/steps/send-to-helix.yml
  parameters:
    HelixSource: ${{ parameters.RepoName }}
    HelixType: ${{ parameters.HelixType }} 
    HelixBuild: $(Build.BuildNumber)
    HelixTargetQueues: ${{ parameters.HelixTargetQueues }}
    HelixAccessToken: ${{ parameters.HelixAccessToken }}            # only defined for internal CI
    Creator: ${{ parameters.RepoName }}         # required for public / external (when there is no access token)
    XUnitProjects: ${{ parameters.XUnitProjects }} 
    XUnitPublishTargetFramework: netcoreapp3.0  # Whatever tfm will work for our test projects for `dotnet publish`
    XUnitRuntimeTargetFramework: netcoreapp2.0  # Whatever tfm to pick from the xunit package, it must exist in that package or the helix job will fail
    XUnitRunnerVersion: '2.4.1'                 # Should match XUnitRunnerConsoleVersion in eng/Versions.props
    IncludeDotNetCli: true
    DotNetCliPackageType: 'sdk'
    DotNetCliVersion: '3.0.100-preview-010184'  # MUST be official release: https://dotnet.microsoft.com/download/dotnet-core/3.0 ; does not need to match sdk we build against
    EnableXUnitReporter: true
    WaitForWorkItemCompletion: true
    DisplayNamePrefix: ${{ parameters.DisplayNamePrefix }}
    condition: succeeded()
    continueOnError: false