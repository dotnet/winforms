parameters:
  # All parameters are required for our purposes (except HelixType); see send-to-helix.yml for details
  HelixSource: ''
  HelixType: 'tests/default'            
  HelixTargetQueues: ''    
  HelixAccessToken: ''
  Creator: ''          
  DisplayNamePrefix: ''        

steps:
- task: DotNetCoreCLI@2
  inputs:
    command: custom
    projects: eng/common/helixpublish.proj
    custom: msbuild
    arguments: '/bl:$(Build.SourcesDirectory)/artifacts/log/$(_BuildConfig)/SendToHelix.binlog'
  displayName: ${{ parameters.DisplayNamePrefix }}
  env:
    HelixSource: ${{ parameters.HelixSource }}
    HelixType: ${{ parameters.HelixType }}
    HelixTargetQueues: ${{ parameters.HelixTargetQueues }}
    HelixAccessToken: ${{ parameters.HelixAccessToken }}
    Creator: ${{ parameters.Creator }}
    WorkItemCommand: ${{ parameters.WorkItemCommand }}
    CorrelationPayloadDirectory: ${{ parameters.CorrelationPayloadDirectory }}
  condition: succeeded()
  continueOnError: false