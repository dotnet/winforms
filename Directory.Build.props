<?xml version="1.0" encoding="utf-8"?>
<Project>
  <PropertyGroup>
    <CheckForOverflowUnderflow>false</CheckForOverflowUnderflow>
  </PropertyGroup>
  
  <Import Project="Sdk.props" Sdk="Microsoft.DotNet.Arcade.Sdk" />
  <Import Project="$(RepositoryEngineeringDir)CodeStyle.props" />
  <Import Project="eng\ReferenceAssemblies.props" />
  <Import Project="eng\FacadeAssemblies.props" />

  <PropertyGroup Condition="'$(CopyrightNetFoundation)' != ''">
    <Copyright>$(CopyrightNetFoundation)</Copyright>
    <PackageLicenseExpression>MIT</PackageLicenseExpression>
  </PropertyGroup>

  <!-- Make sure the pdb is a separate file, and not embedded inside the dll (which is the ArcadeSDK default behavior) -->
  <!-- Note that this MUST COME AFTER the import of Sdk.props -->
  <PropertyGroup>
    <DebugType>Full</DebugType>
  </PropertyGroup>

  <!-- For the purposes of generating code coverage as part of the build -->
  <PropertyGroup Condition="'$(Coverage)' == 'true'">
      <CollectCoverage>true</CollectCoverage>
       <SingleHit>true</SingleHit> <!--see https://github.com/dotnet/machinelearning/pull/2843/files#r262544802-->
      <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies> <!-- required due to https://github.com/tonerdo/coverlet/issues/72 -->
      <CoverletOutputFormat>opencover</CoverletOutputFormat>
      <CoverletOutput>$(BaseOutputPath)$(PlatformConfig)\coverage\$(MSBuildProjectName).coverage</CoverletOutput>
      <Include>[System.Windows.Forms]*</Include>
      <!-- Exclude only Obsolete and tagged with ExcludeFromCodeCoverage !!Avoid using this!! -->
      <Exclude />
      <ExcludeByAttribute>Obsolete,ExcludeFromCodeCoverage</ExcludeByAttribute>
      <ExcludeByFile />
  </PropertyGroup>

  <!-- Make sure coverage targets are defined even in projects where coverlet is not installed -->
  <Target Name="InstrumentModulesAfterBuild" />
  <Target Name="GenerateCoverageResult" />

</Project>
